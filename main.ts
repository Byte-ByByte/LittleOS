namespace SpriteKind {
    export const SysIcon = SpriteKind.create()
    export const $Cursor = SpriteKind.create()
    export const idf = SpriteKind.create()
}
function idfParse (idf: string, x: number, y: number) {
    for (let i = 0; i <= idf.length - 1; i++) {
        currentPixel = idf.charAt(i)
        if (currentPixel == "r") {
            headx = 0
            heady += 1
        } else {
            placePixel(x + headx, y + heady, currentPixel)
        }
        headx += 1
    }
}
function clearAllIDFPixels() {sprites.destroyAllSpritesOfKind(SpriteKind.idf)}
function placePixel (x: number, y: number, color: string) {
    if (color == "1") {
        pixel = sprites.create(assets.image`pixeltype1`, SpriteKind.idf)
    }
    if (color == "2") {
        pixel = sprites.create(assets.image`pixeltype2`, SpriteKind.idf)
    }
    if (color == "3") {
        pixel = sprites.create(assets.image`pixeltype3`, SpriteKind.idf)
    }
    if (color == "4") {
        pixel = sprites.create(assets.image`pixeltype4`, SpriteKind.idf)
    }
    if (color == "5") {
        pixel = sprites.create(assets.image`pixeltype5`, SpriteKind.idf)
    }
    if (color == "6") {
        pixel = sprites.create(assets.image`pixeltype6`, SpriteKind.idf)
    }
    if (color == "7") {
        pixel = sprites.create(assets.image`pixeltype7`, SpriteKind.idf)
    }
    if (color == "8") {
        pixel = sprites.create(assets.image`pixeltype8`, SpriteKind.idf)
    }
    if (color == "9") {
        pixel = sprites.create(assets.image`pixeltype9`, SpriteKind.idf)
    }
    if (color == "a") {
        pixel = sprites.create(assets.image`pixeltypeA`, SpriteKind.idf)
    }
    if (color == "b") {
        pixel = sprites.create(assets.image`pixeltypeB`, SpriteKind.idf)
    }
    if (color == "c") {
        pixel = sprites.create(assets.image`pixeltypeC`, SpriteKind.idf)
    }
    if (color == "d") {
        pixel = sprites.create(assets.image`pixeltypeD`, SpriteKind.idf)
    }
    if (color == "e") {
        pixel = sprites.create(assets.image`pixeltypeE`, SpriteKind.idf)
    }
    if (color == "f") {
        pixel = sprites.create(assets.image`pixeltypeF`, SpriteKind.idf)
    }
    if (color == ".") {
        pixel = sprites.create(assets.image`pixeltypeblank`, SpriteKind.idf)
    }
    pixel.setPosition(x, y)
}
function CreateNewWindow(title: string, hasSysTitleBar: boolean, hasSysMinimize: boolean, hasSysClose: boolean, resizeable: boolean) {
    // Handle window creation
    if (hasSysTitleBar) {
        idfParse("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffrf88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888fbbbbbfbbbbbfbbbbbfrf88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888fbccbbfbbbbbfbcbcbfrf88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888fbcbcbfbcccbfbbcbbfrf88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888fbbccbfbbbbbfbcbcbfrf88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888fbbbbbfbbbbbfbbbbbfrf2222444455557777fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffrf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffr", 0, 0)
    } else {
        idfParse("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffrf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111fbbbbbfbbbbbfbbbbbfrf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111fbccbbfbbbbbfbcbcbfrf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111fbcbcbfbcccbfbbcbbfrf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111fbbccbfbbbbbfbcbcbfrf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111fbbbbbfbbbbbfbbbbbfrf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111fffffffffffffffffffrf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frf11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111frffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffr", 0, 0)
    }
}
function Fakeload () {
    ConsoleInfo = "Loading OS"
    StartupIcon = sprites.create(assets.image`placeholder-x64`, SpriteKind.SysIcon)
    animation.runImageAnimation(
    StartupIcon,
    assets.animation`startupanim`,
    50,
    true
    )
    StartupIcon.setPosition(scene.screenWidth() / 2, scene.screenHeight() / 2)
    pause(5000)
    sprites.destroy(StartupIcon)
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    if (BootManagerUIEnabled) {
        if (SelectedBootManagerOption == 0) {
            SelectedBootManagerOption = 2
        } else {
            SelectedBootManagerOption += -1
        }
    }
})
controller.combos.attachCombo("abaabba+b", function () {
    LoadImage(screenshotimage)
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (BootManagerUIEnabled) {
        BootManagerOpen = false
        scene.setBackgroundImage(assets.image`SysBlack`)
        sprites.destroyAllSpritesOfKind(SpriteKind.Text)
        sprites.destroyAllSpritesOfKind(SpriteKind.SysIcon)
        StartupLogo = sprites.create(assets.image`SysStartupLogo`, SpriteKind.SysIcon)
        if (blockSettings.exists("StartupSound")) {
            PlayEncodedSound(blockSettings.readString("StartupSound"))
        } else {
            console.log("StartupSound does not exist; is RegistryFinished?")
        }
        pause(500)
        ConsoleText = textsprite.create("")
        ConsoleText.setOutline(1, 15)
        ConsoleText.setPosition(8, 14)
        scene.setBackgroundImage(assets.image`background`)
        sprites.destroy(StartupLogo)
        StartIcon = sprites.create(assets.image`StartIcon`, SpriteKind.SysIcon)
        PowerButton = sprites.create(assets.image`poweroptionsbtn`, SpriteKind.SysIcon)
        RecycleBin = sprites.create(assets.image`SysRecycleBin`, SpriteKind.SysIcon)
        RecycleBinText = textsprite.create("Bin", 6, 1)
        StartIcon.setPosition(9, 112)
        PowerButton.setPosition(150, 112)
        RecycleBin.setPosition(9, 9)
        RecycleBinText.setPosition(12, 22)
        SysCursor = sprites.create(assets.image`Cursor`, SpriteKind.$Cursor)
        controller.moveSprite(SysCursor, 100, 100)
        SysCursor.setStayInScreen(true)
        Startup = true
    }
})
function ReloadCursor (CursorImage: Image, Cursor: Sprite) {
    curx = SysCursor.x
    cury = SysCursor.y
    sprites.destroy(Cursor)
    SysCursor = sprites.create(CursorImage, SpriteKind.Player)
    SysCursor.setPosition(curx, cury)
    controller.moveSprite(SysCursor, 100, 100)
    SysCursor.setStayInScreen(true)
}
controller.combos.attachCombo("abudlra+b", function () {
    if (ConsoleOn) {
        ConsoleOn = false
    } else {
        ConsoleOn = true
    }
})
controller.combos.attachCombo("ababuda+b", function () {
    if (!(Startup || (BootManagerOpen || InPE))) {
        BootManagerOpen = true
        sprites.destroyAllSpritesOfKind(SpriteKind.SysIcon)
        BootManagerStartupIcon = sprites.create(assets.image`SysManagerStartupLogo`, SpriteKind.SysIcon)
        BootManagerLoading = sprites.create(assets.image`SysError`, SpriteKind.SysIcon)
        BootManagerLoading.setPosition(80, 80)
        animation.runImageAnimation(
        BootManagerLoading,
        assets.animation`LoadingAnim`,
        50,
        true
        )
    }
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (BootManagerUIEnabled) {
        BootManagerOpen = false
        if (SelectedBootManagerOption == 0) {
            BootManagerUIEnabled = false
            scene.setBackgroundColor(15)
            sprites.destroyAllSpritesOfKind(SpriteKind.Text)
            sprites.destroyAllSpritesOfKind(SpriteKind.SysIcon)
            StartupLogo = sprites.create(assets.image`SysStartupLogo`, SpriteKind.SysIcon)
            if (blockSettings.exists("StartupSound")) {
                PlayEncodedSound(blockSettings.readString("StartupSound"))
            } else {
                console.log("StartupSound does not exist; is RegistryFinished?")
            }
            pause(500)
            ConsoleText = textsprite.create("")
            ConsoleText.setOutline(1, 15)
            ConsoleText.setPosition(8, 14)
            scene.setBackgroundImage(assets.image`background`)
            sprites.destroy(StartupLogo)
            StartIcon = sprites.create(assets.image`StartIcon`, SpriteKind.SysIcon)
            PowerButton = sprites.create(assets.image`poweroptionsbtn`, SpriteKind.SysIcon)
            StartIcon.setPosition(9, 112)
            PowerButton.setPosition(150, 112)
            SysCursor = sprites.create(assets.image`Cursor`, SpriteKind.$Cursor)
            controller.moveSprite(SysCursor, 100, 100)
            SysCursor.setStayInScreen(true)
            Startup = true
        }
        if (SelectedBootManagerOption == 2) {
            BootManagerUIEnabled = false
            scene.setBackgroundColor(15)
            sprites.destroyAllSpritesOfKind(SpriteKind.Text)
            sprites.destroyAllSpritesOfKind(SpriteKind.SysIcon)
            scene.setBackgroundImage(assets.image`SysPE-BG`)
            UtilWindow = sprites.create(assets.image`OSPEUtilWindow`, SpriteKind.SysIcon)
            CloseOSPEBtn = sprites.create(assets.image`ClosePE`, SpriteKind.SysIcon)
            mainutilicon = sprites.create(assets.image`lpecaticon`, SpriteKind.SysIcon)
            CloseOSPEBtn.setPosition(107, 34)
            mainutilicon.setPosition(49, 46)
            mainutiltext = textsprite.create("MainUtil", 8, 1)
            mainutiltext.setPosition(82, 46)
            SysCursor = sprites.create(assets.image`Cursor`, SpriteKind.$Cursor)
            controller.moveSprite(SysCursor, 100, 100)
            SysCursor.setStayInScreen(true)
            InPE = true
        }
    }
})
function SysCreateNotification (Title: string, Description: string, NotificationImage: Image) {
    if (!(NotificationOpen)) {
        NotificationOpen = true
        NotificationWindow = sprites.create(assets.image`NotificationWindowIcon`, SpriteKind.SysIcon)
        NotificationWindow.setPosition(121, 81)
        NotificationIcon = sprites.create(NotificationImage, SpriteKind.SysIcon)
        NotificationClose = sprites.create(assets.image`notificationclose`, SpriteKind.SysIcon)
        NotificationClose.setPosition(NotificationWindow.x + 29, NotificationWindow.y - 12)
        NotificationIcon.setPosition(NotificationWindow.x - 20, NotificationWindow.y + 2)
        NotificationTitle = textsprite.create(Title, 1, 15)
        NotificationTitle.setMaxFontHeight(5)
        NotificationTitle.setPosition(NotificationWindow.x - 5, NotificationWindow.y - 4)
        NotificationText = textsprite.create(Description, 1, 15)
        NotificationText.setMaxFontHeight(5)
        NotificationText.setPosition(NotificationWindow.x - 5, NotificationWindow.y + 3)
        if (blockSettings.exists("NotifySound")) {
            PlayEncodedSong(blockSettings.readString("NotifySound"))
        } else {
            console.log("NotifySound does not exist; is RegistryFinished?")
        }
    } else {
        sprites.destroy(NotificationClose)
        sprites.destroy(NotificationIcon)
        sprites.destroy(NotificationText)
        sprites.destroy(NotificationTitle)
        sprites.destroy(NotificationWindow)
        NotificationOpen = false
        SysCreateNotification(Title, Description, NotificationImage)
    }
}
controller.combos.attachCombo("abababa+b", function () {
    SysCreateNotification("Test", "This is a test", assets.image`SysNotificationIcon`)
})
function RFReadToNF (RadioFormat: string) {
    console.log(RadioFormat)
    RecievedSender = ""
    RecievedMessage = ""
    TempRecivedParam = ""
    RInCommand = false
    GetSenderInfo = false
    GetMessageInfo = false
    while (true) {
        let index = 0
        // use < instead of <= to prevent out of bounds error
        currentChar = RadioFormat.charAt(index)
        if (currentChar == ":") {
            if (RInCommand) {
                console.log(TempRecivedParam)
                // Exiting command mode
                if (TempRecivedParam == "sender") {
                    GetSenderInfo = true
                } else if (TempRecivedParam == "message") {
                    GetMessageInfo = true
                } else if (TempRecivedParam == "nmping") {
                    radio.sendString(":sender:Device;:pingack:;:e:;")
                } else if (TempRecivedParam == "pingack") {
                    RecievedMessage = "Ping Success"
                } else if (TempRecivedParam == "e") {
                    break;
                } else {
                    console.log("Error while reading message: " + TempRecivedParam + " is not a valid parameter.")
                    RecievedSender = "invalid"
                    RecievedMessage = "invalid"
                }
                RInCommand = false
            } else {
                // Entering command mode
                RInCommand = true
                TempRecivedParam = ""
                GetSenderInfo = false
                GetMessageInfo = false
            }
        } else if (currentChar == ";") {
            // Command separator
            GetSenderInfo = false
            GetMessageInfo = false
        } else {
            if (RInCommand) {
                // Building the command
                TempRecivedParam = "" + TempRecivedParam + currentChar
            } else {
                if (GetSenderInfo) {
                    RecievedSender = "" + RecievedSender + currentChar
                } else if (GetMessageInfo) {
                    RecievedMessage = "" + RecievedMessage + currentChar
                }
            }
        }
    }
    console.log("" + RecievedSender + ":" + RecievedMessage)
    SysCreateNotification(RecievedSender, RecievedMessage, assets.image`NetworkIcon`)
}
controller.combos.attachCombo("aba+b", function () {
    screenshotimage = ""
    pixelx = 0
    pixely = 0
    for (let index = 0; index < 120; index++) {
        for (let index = 0; index < 160; index++) {
            ConsoleInfo = convertToText(image.screenImage().getPixel(pixelx, pixely))
            screenshotimage = "" + screenshotimage + ("" + convertToText(image.screenImage().getPixel(pixelx, pixely)) + ",")
            pixelx += 1
        }
        screenshotimage = "" + screenshotimage + "l,"
        pixely += 1
    }
    ConsoleInfo = "Screenshot Taken"
    ScreenShotWindow = sprites.create(assets.image`ScreenShotWindow`, SpriteKind.SysIcon)
    ScreenShotWindow.setPosition(33, 17)
})
function DecodeSFAT(property: string, file: string) {
    let fileContent = blockSettings.readString(file);
    let tempProperty = "";
    let value = "";
    let readProperty = false;

    for (let i = 0; i < fileContent.length; i++) {
        if (fileContent.substr(i, 4) === "--::") {
            i += 4;

            while (fileContent.charAt(i) !== ";" && i < fileContent.length) {
                if (fileContent.charAt(i) !== " ") {
                    if (!readProperty) {
                        tempProperty += fileContent.charAt(i);
                    } else {
                        value += fileContent.charAt(i);
                    }
                } else if (tempProperty === property) {
                    return value;
                }
                i++;
            }

            tempProperty = "";
            value = "";
            readProperty = false;
        }
    }

    return null;
}
controller.combos.attachCombo("ababababa+b", function () {
    RFReadToNF(":sender:John Doe;:nmping:;")
})
controller.combos.attachCombo("abbaaabba+b", function () {
    HandleLEXEIFatalException("MANUALLY_INITIATED_CRASH")
})
function WriteSFAT (filename: string, filetype: string, directory: string, data: string) {
    blockSettings.writeString(filename, "--::sfat 1.2 --::filetype " + filetype + " --::directory " + directory + " --::data " + data)
}
function LoadImage (LIF: string) {
    imagepixelx = 0
    imagepixely = 0
    pixeltemp = ""
    for (let index32 = 0; index32 <= LIF.length; index32++) {
        if (LIF.charAt(index32) == ",") {
            image.screenImage().setPixel(imagepixelx, imagepixely, parseInt(pixeltemp))
            pixeltemp = ""
            imagepixelx += 1
        } else if (LIF.charAt(index32) == "l") {
            imagepixely += 1
        }
        pixeltemp = "" + pixeltemp + LIF.charAt(index32)
    }
}
function ReadSFAT (file: string) {
    data = blockSettings.readString(file)
}
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    if (BootManagerUIEnabled) {
        if (SelectedBootManagerOption == 2) {
            SelectedBootManagerOption = 0
        } else {
            SelectedBootManagerOption += 1
        }
    }
})
radio.onReceivedString(function (receivedString) {
    RFReadToNF(receivedString)
})
function PlayEncodedSound (CSVS: string) {
    CommasFound = 0
    index222 = 0
    SoundType = parseFloat(CSVS.charAt(0))
    TempFreqencyA = ""
    TempFrequencyB = ""
    TempVolA = ""
    TempVolB = ""
    TempDur = ""
    FrequencyA = 0
    FrequencyB = 0
    VolA = 0
    VolB = 0
    Duration = 0
    while (true) {
        if (index222 >= 2) {
            if (CSVS.charAt(index222) == ",") {
                CommasFound += 1
                index222 = index222 + 1
            }
            if (CommasFound == 0) {
                TempFreqencyA = "" + TempFreqencyA + CSVS.charAt(index222)
            }
            if (CommasFound == 1) {
                FrequencyA = parseFloat(TempFreqencyA)
                TempFrequencyB = "" + TempFrequencyB + CSVS.charAt(index222)
            }
            if (CommasFound == 2) {
                FrequencyB = parseFloat(TempFrequencyB)
                TempVolA = "" + TempVolA + CSVS.charAt(index222)
            }
            if (CommasFound == 3) {
                VolA = parseFloat(TempVolA)
                TempVolB = "" + TempVolB + CSVS.charAt(index222)
            }
            if (CSVS.charAt(index222) == "e") {
                Duration = parseFloat(TempDur)
                break;
            }
            if (CommasFound == 4) {
                VolB = parseFloat(TempVolB)
                TempDur = "" + TempDur + CSVS.charAt(index222)
            }
        }
        index222 = index222 + 1
    }
    if (true) {
        console.logValue("SoundType", SoundType)
        console.logValue("FreqA", FrequencyA)
        console.logValue("FreqB", FrequencyB)
        console.logValue("VolA", VolA)
        console.logValue("VolB", VolB)
        console.logValue("Dur", Duration)
    }
    if (SoundType == 0) {
        music.play(music.createSoundEffect(
        WaveShape.Sine,
        FrequencyA,
        FrequencyB,
        VolA,
        VolB,
        Duration,
        SoundExpressionEffect.None,
        InterpolationCurve.Linear
        ), music.PlaybackMode.UntilDone)
    } else if (SoundType == 1) {
        music.play(music.createSoundEffect(
        WaveShape.Square,
        FrequencyA,
        FrequencyB,
        VolA,
        VolB,
        Duration,
        SoundExpressionEffect.None,
        InterpolationCurve.Linear
        ), music.PlaybackMode.UntilDone)
    } else if (SoundType == 2) {
        music.play(music.createSoundEffect(
        WaveShape.Sawtooth,
        FrequencyA,
        FrequencyB,
        VolA,
        VolB,
        Duration,
        SoundExpressionEffect.None,
        InterpolationCurve.Linear
        ), music.PlaybackMode.UntilDone)
    } else if (SoundType == 3) {
        music.play(music.createSoundEffect(
        WaveShape.Triangle,
        FrequencyA,
        FrequencyB,
        VolA,
        VolB,
        Duration,
        SoundExpressionEffect.None,
        InterpolationCurve.Linear
        ), music.PlaybackMode.UntilDone)
    } else if (SoundType == 4) {
        music.play(music.createSoundEffect(
        WaveShape.Square,
        FrequencyA,
        FrequencyB,
        VolA,
        VolB,
        Duration,
        SoundExpressionEffect.None,
        InterpolationCurve.Curve
        ), music.PlaybackMode.UntilDone)
    } else {
        console.log("Error projecting sound type: invalid SoundType, in PlayEncodedSound")
    }
    return
}
controller.combos.attachCombo("abdua+b", function () {
    radio.sendString(":InvalID Tester:;:e:;")
    SysCreateNotification("Radio", "Sent ping", assets.image`RadioIcon`)
})
controller.combos.attachCombo("abuda+b", function () {
    radio.sendString(":sender:Device;:nmping:;:e:;")
    SysCreateNotification("Radio", "Sent ping", assets.image`RadioIcon`)
})
function lexeiJITcompile (lexei: string, compilerflags: string, exeflags: string) {
	/*
    Let's make .net again! LOL 
    So, let's handle the compiler flags in format: -flag and -flag-value=[value]

    Flags:
    -g For debugging
    -v Verbose
    -logfile=[path] Create a log file in [path]
    -safe-mode Treat executable delicately
    -compat=[version] Force compatibility to [version], can break newer software
    -strict-errors Treat ALL errors as fatal errors
    -strict-errors-only=[error,error] Treat all errors passed into this path as fatal errors
    -ignore-errors [THIS IS NOT RECCOMENDED!] Ignores ALL errors.
    -ignore-errors-only=[error,error] [THIS IS NOT RECCOMENDED!] Ignore ALL errors passed into this flag.
    -administrator Gives administrator privilages, but only after a UAC window.

    EXE flags are directly passed into the EXE into a array called "flags".

    ill build this later, got sfat to worry about first

    and rename .lexei to .lxi its much better

    */
    
    
}
function HandleLEXEIFatalException(error: string) {
    if (error == "") { error = "UNKNOWN_ERROR" }
    sprites.destroyAllSpritesOfKind(SpriteKind.SysIcon)
    sprites.destroyAllSpritesOfKind(SpriteKind.Text)
    scene.setBackgroundImage(assets.image('SysBlack'))
    errortext = textsprite.create(error)
    errortext.setPosition(scene.screenWidth() / 2, scene.screenHeight() / 2)
}
function CreateNewUACWindow() {
    // Handle UAC window creation
    UACWindow = sprites.create(assets.image`uacwindow`, SpriteKind.SysIcon)
}
function ChkRegristry () {
    if (!(blockSettings.exists("RegristryFinished")) || blockSettings.readNumber("RegristryFinished") == 0) {
        blockSettings.writeNumber("RegristryFinished", 0)
        blockSettings.writeString("StartupSound", "0,1000,1000,255,0,200e0,1500,1500,255,0,200e0,1500,1500,255,0,200e0,1000,1000,255,0,200ep200e3,1000,1000,255,0,200e3,2000,2000,255,0,200ef")
        blockSettings.writeString("NotifySound", "0,130.813,130.813,255,0,100e0,174.614,174.614,255,0,100e0,195.998,195.998,255,0,100e0,261.626,261.626,255,0,100e0,195.998,195.998,255,0,200ef")
        blockSettings.writeString("CallSound", "0,130.813,130.813,255,0,100e0,174.614,174.614,255,0,100e0,195.998,195.998,255,0,100ep100e0,130.813,130.813,255,0,100e0,174.614,174.614,255,0,100e0,195.998,195.998,255,0,100ef")
        blockSettings.writeString("ShortNotifySound", "0,")
        if (false) {
            blockSettings.writeNumber("RegristryFinished", 1)
        }
    } else if (blockSettings.exists("RegristryFinished") && blockSettings.readNumber("RegristryFinished") == 0) {
    	
    }
}
controller.combos.attachCombo("dbda+b", function () {
	CreateNewUACWindow()
})
function PlayEncodedSong(CSVSS: string) {
    let index22 = 0;
    let Sound = "";
    let IsPad = false;

    while (index22 < CSVSS.length) {
        let currentChar = CSVSS.charAt(index22);

        if (currentChar == "e") {
            if (IsPad) {
                // Pause for the duration stored in Sound
                pause(parseFloat(Sound));
            } else {
                // Play the sound stored in Sound
                PlayEncodedSound(Sound + "e");  // Append "e" to finish the sound string
            }
            Sound = "";  // Reset Sound after handling either play or pause
            IsPad = false; // Reset pause flag
        } else if (currentChar == "f") {
            // Exit when "f" is encountered
            break;
        } else if (currentChar == "p") {
            // Mark as a pause action
            IsPad = true;
        } else {
            // Append to Sound string if not a control character
            Sound += currentChar;
        }

        index22++;
    }
}

let curPropS = ""
let UACWindow: Sprite = null
let pixel: Sprite = null
let heady = 0
let headx = 0
let currentPixel = ""
let data = ""
let errortext: TextSprite = null
let shutdownanim: Sprite = null
let PECancelShutDown: Sprite = null
let PEShutDown: Sprite = null
let ospeclosedialog: Sprite = null
let mainpewindowutil: Sprite = null
let PEShutDownActive = false
let ComputerReady: Sprite = null
let ProcessCycles = 0
let Sleep = false
let Restart = false
let Shutdown = false
let PlaceholderAnimShutdown: Sprite = null
let lmptext: TextSprite = null
let LittleMediaPlayerIcon: Sprite = null
let fbapptext: TextSprite = null
let appfbinteractive: Sprite = null
let Close: Sprite = null
let IsAppMenuOpen = false
let IsPowerMenuOpen = false
let ClosePowerBtn: Sprite = null
let SleepModeBtn: Sprite = null
let RestartBtn: Sprite = null
let ShutDownBtn: Sprite = null
let PowerMenu: Sprite = null
let Duration = 0
let VolB = 0
let VolA = 0
let FrequencyB = 0
let FrequencyA = 0
let TempDur = ""
let TempVolB = ""
let TempVolA = ""
let TempFrequencyB = ""
let TempFreqencyA = ""
let SoundType = 0
let index222 = 0
let CommasFound = 0
let pixeltemp = ""
let imagepixely = 0
let imagepixelx = 0
let IsPad = false
let Sound = ""
let index22 = 0
let tempProperty = ""
let fileContent = ""
let ScreenShotWindow: Sprite = null
let pixely = 0
let pixelx = 0
let currentChar = ""
let GetMessageInfo = false
let GetSenderInfo = false
let RInCommand = false
let TempRecivedParam = ""
let RecievedMessage = ""
let RecievedSender = ""
let NotificationText: TextSprite = null
let NotificationTitle: TextSprite = null
let NotificationClose: Sprite = null
let NotificationIcon: Sprite = null
let NotificationWindow: Sprite = null
let mainutiltext: TextSprite = null
let mainutilicon: Sprite = null
let CloseOSPEBtn: Sprite = null
let UtilWindow: Sprite = null
let BootManagerLoading: Sprite = null
let BootManagerStartupIcon: Sprite = null
let ConsoleOn = false
let cury = 0
let curx = 0
let screenshotimage = ""
let StartupIcon: Sprite = null
let Startup = false
let SysCursor: Sprite = null
let RecycleBinText: TextSprite = null
let RecycleBin: Sprite = null
let PowerButton: Sprite = null
let StartIcon: Sprite = null
let ConsoleText: TextSprite = null
let StartupLogo: Sprite = null
let SelectIcon: Sprite = null
let StartInPEText: TextSprite = null
let StartSafeModeText: TextSprite = null
let StartNormalText: TextSprite = null
let BootManagerUIEnabled = false
let BootManagerOpen = false
let InPE = false
let ConsoleInfo = ""
let NotificationOpen = false
let SelectedBootManagerOption = 0
let Sound2 = ""
let currentChar2 = ""
SelectedBootManagerOption = 0
NotificationOpen = false
ConsoleInfo = "Started StartStack"
InPE = false
ChkRegristry()
if (!(true)) {
    blockSettings.writeString("SysPartitionList", "--syspart1.2 --partition::")
}
if (!(blockSettings.exists("File Allocation Table 1"))) {
    blockSettings.writeString("File Allocation Table 1", "--::sfatversion 1.2 --::data::")
    blockSettings.writeString("SysPartitionList", "" + blockSettings.readString("SysPartitionList") + "File Allocation Table 1,")
}
if (true) {
	
}
if (BootManagerOpen) {
    BootManagerUIEnabled = true
    SelectedBootManagerOption = 0
    sprites.destroyAllSpritesOfKind(SpriteKind.SysIcon)
    scene.setBackgroundImage(assets.image`OSBootManager`)
    StartNormalText = textsprite.create("Start normally")
    StartSafeModeText = textsprite.create("Start in Safe Mode")
    StartInPEText = textsprite.create("Start in osPE")
    SelectIcon = sprites.create(assets.image`bootselecticon`, SpriteKind.SysIcon)
    StartNormalText.setPosition(50, 32)
    StartSafeModeText.setPosition(62, 44)
    StartInPEText.setPosition(47, 56)
} else {
    StartupLogo = sprites.create(assets.image`SysStartupLogo`, SpriteKind.SysIcon)
    if (blockSettings.exists("StartupSound")) {
        PlayEncodedSound(blockSettings.readString("StartupSound"))
    } else {
        console.log("StartupSound does not exist; is RegistryFinished?")
    }
    pause(500)
    ConsoleText = textsprite.create("")
    ConsoleText.setOutline(1, 15)
    ConsoleText.setPosition(8, 14)
    scene.setBackgroundImage(assets.image`background`)
    sprites.destroy(StartupLogo)
    StartIcon = sprites.create(assets.image`StartIcon`, SpriteKind.SysIcon)
    PowerButton = sprites.create(assets.image`poweroptionsbtn`, SpriteKind.SysIcon)
    RecycleBin = sprites.create(assets.image`SysRecycleBin`, SpriteKind.SysIcon)
    RecycleBinText = textsprite.create("Bin", 6, 1)
    StartIcon.setPosition(9, 112)
    PowerButton.setPosition(150, 112)
    RecycleBin.setPosition(9, 9)
    RecycleBinText.setPosition(12, 22)
    SysCursor = sprites.create(assets.image`Cursor`, SpriteKind.$Cursor)
    controller.moveSprite(SysCursor, 100, 100)
    SysCursor.setStayInScreen(true)
    Startup = true
}
game.onUpdateInterval(10, function () {
    if (BootManagerOpen) {
        SelectIcon.setPosition(130, 32 + 12 * SelectedBootManagerOption)
    }
})
game.onUpdateInterval(10, function () {
    if (Startup) {
        curx = SysCursor.x
        cury = SysCursor.x
        if (controller.A.isPressed()) {
            if (SysCursor.overlapsWith(PowerButton)) {
                ConsoleInfo = "PowerMenuOpened"
                color.startFade(color.originalPalette, color.GrayScale, 200)
                sprites.destroyAllSpritesOfKind(SpriteKind.SysIcon)
                sprites.destroyAllSpritesOfKind(SpriteKind.Text)
                ConsoleText = textsprite.create("")
                ConsoleText.setOutline(1, 15)
                ConsoleText.setPosition(8, 14)
                PowerMenu = sprites.create(assets.image`PowerMenuWindow`, SpriteKind.SysIcon)
                PowerMenu.setPosition(scene.screenWidth() / 2, scene.screenHeight() / 2)
                ShutDownBtn = sprites.create(assets.image`ShutDownBtn`, SpriteKind.SysIcon)
                RestartBtn = sprites.create(assets.image`RestartBtn`, SpriteKind.SysIcon)
                SleepModeBtn = sprites.create(assets.image`SleepModeBtn`, SpriteKind.SysIcon)
                ClosePowerBtn = sprites.create(assets.image`CloseBtn`, SpriteKind.SysIcon)
                ShutDownBtn.setPosition(scene.screenWidth() / 2 - 20, scene.screenHeight() / 2)
                RestartBtn.setPosition(scene.screenWidth() / 2, scene.screenHeight() / 2)
                SleepModeBtn.setPosition(scene.screenWidth() / 2 + 20, scene.screenHeight() / 2)
                ClosePowerBtn.setPosition(scene.screenWidth() / 2, scene.screenHeight() / 2 + 20)
                IsPowerMenuOpen = true
            }
            if (SysCursor.overlapsWith(StartIcon)) {
                ReloadCursor(assets.image`Cursor`, SysCursor)
                scene.setBackgroundImage(assets.image`AppMenuBackground`)
                if (!(IsAppMenuOpen)) {
                    IsAppMenuOpen = true
                    ConsoleInfo = "AppMenuOpened"
                    Close = sprites.create(assets.image`Close`, SpriteKind.SysIcon)
                    appfbinteractive = sprites.create(assets.image`app-fb icon`, SpriteKind.SysIcon)
                    fbapptext = textsprite.create("File Browser")
                    LittleMediaPlayerIcon = sprites.create(assets.image`MediaPlayerIcon`, SpriteKind.Player)
                    lmptext = textsprite.create("LittleMedia")
                    fbapptext.setPosition(40, 52)
                    Close.setPosition(144, 10)
                    appfbinteractive.setPosition(14, 37)
                    LittleMediaPlayerIcon.setPosition(14, 73)
                    lmptext.setPosition(39, 90)
                    StartIcon.y += -1
                }
            } else {
                ReloadCursor(assets.image`Cursor`, SysCursor)
            }
            if (IsAppMenuOpen) {
                if (SysCursor.overlapsWith(Close)) {
                    ConsoleInfo = "AppClosed"
                    scene.setBackgroundImage(assets.image`background`)
                    sprites.destroy(Close)
                    sprites.destroy(appfbinteractive)
                    sprites.destroy(fbapptext)
                    sprites.destroy(LittleMediaPlayerIcon)
                    sprites.destroy(lmptext)
                    StartIcon.setPosition(9, 112)
                    IsAppMenuOpen = false
                }
                if (SysCursor.overlapsWith(appfbinteractive)) {
                    IsAppMenuOpen = false
                    scene.setBackgroundImage(assets.image`fbwindow`)
                    sprites.destroy(appfbinteractive)
                    sprites.destroy(fbapptext)
                    sprites.destroy(LittleMediaPlayerIcon)
                    sprites.destroy(lmptext)
                }
                if (SysCursor.overlapsWith(LittleMediaPlayerIcon)) {
                    IsAppMenuOpen = false
                    scene.setBackgroundImage(assets.image`littlemediawindow`)
                    sprites.destroy(appfbinteractive)
                    sprites.destroy(fbapptext)
                    sprites.destroy(LittleMediaPlayerIcon)
                    sprites.destroy(lmptext)
                }
            }
            if (IsPowerMenuOpen) {
                if (SysCursor.overlapsWith(ShutDownBtn)) {
                    ConsoleInfo = "Shutting Down System"
                    color.startFadeFromCurrent(color.originalPalette)
                    scene.setBackgroundImage(assets.image`SysBlue`)
                    sprites.destroyAllSpritesOfKind(SpriteKind.SysIcon)
                    PlaceholderAnimShutdown = sprites.create(assets.image`SysError`, SpriteKind.Player)
                    animation.runImageAnimation(
                    PlaceholderAnimShutdown,
                    assets.animation`PowerDownAnim`,
                    50,
                    true
                    )
                    Shutdown = true
                }
                if (SysCursor.overlapsWith(RestartBtn)) {
                    ConsoleInfo = "Restarting System"
                    color.startFadeFromCurrent(color.originalPalette)
                    scene.setBackgroundImage(assets.image`SysBlue`)
                    sprites.destroyAllSpritesOfKind(SpriteKind.SysIcon)
                    PlaceholderAnimShutdown = sprites.create(assets.image`SysError`, SpriteKind.Player)
                    animation.runImageAnimation(
                    PlaceholderAnimShutdown,
                    assets.animation`PowerDownAnim`,
                    50,
                    true
                    )
                    Restart = true
                }
                if (SysCursor.overlapsWith(SleepModeBtn)) {
                    ConsoleInfo = "System in sleep"
                    Sleep = true
                    sprites.destroy(ShutDownBtn)
                    sprites.destroy(SleepModeBtn)
                    sprites.destroy(RestartBtn)
                    sprites.destroy(PowerMenu)
                    sprites.destroy(ClosePowerBtn)
                    pause(100)
                    color.FadeToBlack.startScreenEffect(500)
                    StartIcon = sprites.create(assets.image`StartIcon`, SpriteKind.SysIcon)
                    PowerButton = sprites.create(assets.image`poweroptionsbtn`, SpriteKind.SysIcon)
                    StartIcon.setPosition(9, 112)
                    PowerButton.setPosition(150, 112)
                }
                if (SysCursor.overlapsWith(ClosePowerBtn)) {
                    color.startFadeFromCurrent(color.originalPalette, 100)
                    sprites.destroy(ShutDownBtn)
                    sprites.destroy(SleepModeBtn)
                    sprites.destroy(RestartBtn)
                    sprites.destroy(PowerMenu)
                    sprites.destroy(ClosePowerBtn)
                    StartIcon = sprites.create(assets.image`StartIcon`, SpriteKind.SysIcon)
                    PowerButton = sprites.create(assets.image`poweroptionsbtn`, SpriteKind.SysIcon)
                    StartIcon.setPosition(9, 112)
                    PowerButton.setPosition(150, 112)
                }
            }
        }
        if (controller.B.isPressed()) {
            ReloadCursor(assets.image`CursorRightClick`, SysCursor)
        } else {
            ReloadCursor(assets.image`Cursor`, SysCursor)
        }
        if (controller.A.isPressed()) {
            ReloadCursor(assets.image`CursorLeftClick`, SysCursor)
        } else if (!(controller.B.isPressed())) {
            ReloadCursor(assets.image`Cursor`, SysCursor)
        }
        if (Shutdown) {
            ProcessCycles += 1
            if (ProcessCycles == 500) {
                scene.setBackgroundImage(assets.image`SysBlack`)
                sprites.destroy(PlaceholderAnimShutdown)
                ComputerReady = sprites.create(assets.image`computerready`, SpriteKind.SysIcon)
            }
        }
        if (Restart) {
            ProcessCycles += 1
            if (ProcessCycles == 500) {
                game.reset()
            }
        }
        if (Sleep) {
            if (controller.A.isPressed()) {
                ConsoleInfo = "System awoken"
                color.startFadeFromCurrent(color.originalPalette)
            }
        }
        if (NotificationOpen) {
            if (SysCursor.overlapsWith(NotificationClose)) {
                if (controller.A.isPressed()) {
                    sprites.destroy(NotificationClose)
                    sprites.destroy(NotificationIcon)
                    sprites.destroy(NotificationText)
                    sprites.destroy(NotificationTitle)
                    sprites.destroy(NotificationWindow)
                    NotificationOpen = false
                }
            }
        }
    }
    if (InPE) {
        if (controller.A.isPressed()) {
            if (SysCursor.overlapsWith(mainutilicon)) {
                mainpewindowutil = sprites.create(assets.image`OSPEMainWindow`, SpriteKind.SysIcon)
            } else if (SysCursor.overlapsWith(CloseOSPEBtn)) {
                if (!(PEShutDownActive)) {
                    ospeclosedialog = sprites.create(assets.image`OSPEShutDownClassic`, SpriteKind.SysIcon)
                    PEShutDown = sprites.create(assets.image`OSPEConfirmSDDialog`, SpriteKind.SysIcon)
                    PECancelShutDown = sprites.create(assets.image`OSPECloseDialog`, SpriteKind.SysIcon)
                    PEShutDown.setPosition(63, 70)
                    PECancelShutDown.setPosition(73, 70)
                    PEShutDownActive = true
                }
            } else if (PEShutDownActive) {
                if (SysCursor.overlapsWith(PEShutDown)) {
                    Shutdown = true
                    sprites.destroyAllSpritesOfKind(SpriteKind.SysIcon)
                    sprites.destroyAllSpritesOfKind(SpriteKind.Text)
                    scene.setBackgroundImage(assets.image`SysBlack`)
                    shutdownanim = sprites.create(assets.image`SysError`, SpriteKind.SysIcon)
                    animation.runImageAnimation(
                    shutdownanim,
                    assets.animation`PowerDownAnim`,
                    100,
                    true
                    )
                } else if (SysCursor.overlapsWith(PECancelShutDown)) {
                    sprites.destroy(PECancelShutDown)
                    sprites.destroy(PEShutDown)
                    sprites.destroy(ospeclosedialog)
                    PEShutDownActive = false
                }
            }
        }
        if (Shutdown) {
            ProcessCycles += 1
            if (ProcessCycles == 500) {
                scene.setBackgroundImage(assets.image`SysBlack`)
                sprites.destroy(shutdownanim)
                ComputerReady = sprites.create(assets.image`computerready`, SpriteKind.SysIcon)
            }
        }
        if (controller.B.isPressed()) {
            ReloadCursor(assets.image`CursorRightClick`, SysCursor)
        } else {
            ReloadCursor(assets.image`Cursor`, SysCursor)
        }
        if (controller.A.isPressed()) {
            ReloadCursor(assets.image`CursorLeftClick`, SysCursor)
        } else if (!(controller.B.isPressed())) {
            ReloadCursor(assets.image`Cursor`, SysCursor)
        }
    }
})
